{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/be6douze/Documents/CSC309/team28/client/src/App.js\";\n\n/* New cleaned up version of App.js */\nimport React from 'react';\nimport './App.css';\nimport LocationData from './helperJS/LocationData';\nimport UserData from './helperJS/UserData';\nimport SiteMap from './react_components/SiteMap';\nimport LocationPage from './react_components/LocationPage';\nimport UserPage from './react_components/UserPage';\nimport SearchPage from './react_components/Search/searchPage';\nimport SearchForm from './react_components/Search/searchFormPage';\nimport ReviewPage from './react_components/ReviewPage';\nimport LoginPage from './react_components/LoginPage';\nconst defaultTags = [\"Curbside Pickup\", \"Hand Sanitizer\", \"Masks\", \"Gloves\", \"Checks Temperature\", \"Patio\"];\nexport class App extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.leaveReview = () => {\n      this.setState({\n        sidePageClass: \"leaveReviewPage\"\n      });\n    };\n\n    this.backToLocPage = () => {\n      if (this.state.currLocId !== -1) {\n        this.setState({\n          sidePageClass: \"locPage\"\n        });\n      } else {\n        this.closeSidePage();\n      }\n    };\n\n    this.backToSearchPage = () => {\n      this.setState({\n        currSearchQuery: -1\n      });\n    };\n\n    this.state = {\n      mapClass: \"fullMap\",\n      overlayClass: \"none\",\n      userLoggedIn: \"\",\n      currLocId: -1,\n      currUserId: -1,\n      currSearchQuery: -1,\n      showSearchPage: false,\n      locData: new LocationData(),\n      userData: new UserData(),\n      sidePageClass: \"locPage\"\n    }; // Adds hardcoded location data\n\n    this.state.locData.addLocation(\"Sidney Smith\", \"Lecture Hall\", 43.663098, -79.398568, defaultTags);\n    this.state.locData.addLocation(\"UofT Bookstore\", \"Store\", 43.659213, -79.396960, defaultTags);\n    this.state.locData.addLocation(\"Isabel Bader Theatre\", \"Theatre\", 43.667246, -79.392524, defaultTags);\n    this.state.locData.updateTags(0, [{\n      name: defaultTags[4],\n      val: 60\n    }, {\n      name: defaultTags[1],\n      val: 95\n    }, {\n      name: defaultTags[0],\n      val: 20\n    }]);\n    this.state.locData.updateTags(1, [{\n      name: defaultTags[2],\n      val: 42.5\n    }, {\n      name: defaultTags[3],\n      val: 0.5\n    }]);\n    this.state.locData.updateTags(2, [{\n      name: defaultTags[5],\n      val: 100\n    }]);\n    this.state.userData.addUser(\"admin\", \"admin\");\n    this.state.userData.addUser(\"user\", \"js\");\n    this.state.userData.addUser(\"janedoe\", \"jd\");\n    this.state.userData.addReview(0, 1, 4.0, \"Lots of hand sanitizer on hand!\");\n    this.state.userData.addReview(0, 2, 4.5, \"Washrooms infrequently cleaned. Terrible, but I'll give a high rating for testing purposes.\");\n    this.state.locData.addReview(0, \"user\", 4.0, \"Lots of hand sanitizer on hand!\");\n    this.state.locData.addReview(0, \"janedoe\", 4.5, \"Washrooms infrequently cleaned. Terrible, but I'll give a high rating for testing purposes.\");\n    this.openLocPage = this.openLocPage.bind(this);\n    this.openUserPage = this.openUserPage.bind(this);\n    this.openSearchPage = this.openSearchPage.bind(this);\n    this.setSearchResult = this.setSearchResult.bind(this);\n    this.closeSidePage = this.closeSidePage.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n    this.closeOverlay = this.closeOverlay.bind(this);\n    this.handleLoginAttempt = this.handleLoginAttempt.bind(this);\n    this.deleteReview = this.deleteReview.bind(this);\n    this.deleteUser = this.deleteUser.bind(this);\n  } // Marker Handler\n\n\n  openLocPage(id) {\n    const otherSetting = this.state.mapClass === \"fullMap\" ? \"sideMap\" : \"fullMap\";\n\n    if ((this.state.currLocId === -1 || this.state.currLocId === id) && !(this.state.showSearchPage || this.state.currUserId !== -1)) {\n      this.setState({\n        currUserId: -1,\n        showSearchPage: false,\n        mapClass: otherSetting,\n        currLocId: this.state.currLocId === id ? -1 : id,\n        sidePageClass: \"locPage\"\n      });\n    } else {\n      this.setState({\n        currUserId: -1,\n        showSearchPage: false,\n        currLocId: id,\n        sidePageClass: \"locPage\"\n      });\n    }\n  }\n\n  openUserPage(username) {\n    if (this.state.sidePageClass === \"userPage\" && this.state.currUserId === username) {\n      this.closeSidePage();\n    } else {\n      this.setState({\n        currUserId: username,\n        sidePageClass: \"userPage\",\n        mapClass: \"sideMap\"\n      });\n    }\n  }\n\n  openSearchPage() {\n    if (!this.state.showSearchPage) {\n      this.setState({\n        showSearchPage: true,\n        currSearchQuery: -1,\n        currLocId: -1,\n        mapClass: \"sideMap\"\n      });\n    } else {\n      this.setState({\n        showSearchPage: false,\n        currSearchQuery: -1,\n        currLocId: -1,\n        mapClass: \"fullMap\"\n      });\n    }\n  }\n\n  setSearchResult(query) {\n    this.setState({\n      currSearchQuery: query\n    });\n  }\n\n  deleteReview(username, locId, id) {\n    const uid = this.state.userData.getUser(username).uid;\n    this.setState({\n      locData: this.state.locData.removeReview(locId, id),\n      userData: this.state.userData.removeReview(uid, id)\n    });\n  }\n\n  deleteUser(username) {\n    this.closeSidePage();\n    this.setState({\n      userData: this.state.userData.removeUser(username, this.state.locData)\n    });\n  }\n\n  renderExitButton() {\n    return /*#__PURE__*/_jsxDEV(\"img\", {\n      className: \"exitButton\",\n      alt: \"exitButton\",\n      src: `${process.env.PUBLIC_URL}/assets/images/exit.png`,\n      title: 'Close Side Panel',\n      onClick: this.closeSidePage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 12\n    }, this);\n  } // We might want to use routers instead; this works for now.\n\n\n  renderSidePage() {\n    if (this.state.mapClass === \"sideMap\") {\n      if (this.state.showSearchPage) {\n        if (this.state.currSearchQuery === -1) {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidePage\",\n            children: [this.renderExitButton(), /*#__PURE__*/_jsxDEV(SearchForm, {\n              setSearchResult: this.setSearchResult\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 21\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"sidePage\",\n            children: [this.renderExitButton(), /*#__PURE__*/_jsxDEV(SearchPage, {\n              locData: this.state.locData.getLocationsWithQuery(this.state.currSearchQuery),\n              userData: this.state.userData.getUser(this.state.currUserId),\n              openLocPage: this.openLocPage,\n              backToSearchPage: this.backToSearchPage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 21\n          }, this);\n        }\n      }\n\n      if (this.state.currUserId !== -1 && this.state.sidePageClass === 'userPage') {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidePage\",\n          children: [this.renderExitButton(), /*#__PURE__*/_jsxDEV(UserPage, {\n            locData: this.state.locData.locations,\n            deleteReview: this.deleteReview,\n            userData: this.state.userData.getUser(this.state.currUserId),\n            currentUser: this.state.userLoggedIn,\n            deleteUser: this.deleteUser,\n            openLocPage: this.openLocPage,\n            backToLocPage: this.backToLocPage\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 21\n        }, this);\n      }\n\n      if (this.state.sidePageClass === \"leaveReviewPage\") {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidePage\",\n          children: [this.renderExitButton(), /*#__PURE__*/_jsxDEV(ReviewPage, {\n            locData: this.state.locData.getLoc(this.state.currLocId),\n            backToLocPage: this.backToLocPage,\n            currentUser: this.state.userLoggedIn\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidePage\",\n          children: [this.renderExitButton(), /*#__PURE__*/_jsxDEV(LocationPage, {\n            locData: this.state.locData.getLoc(this.state.currLocId),\n            openUserPage: this.openUserPage,\n            leaveReview: this.leaveReview,\n            currentUser: this.state.userLoggedIn,\n            deleteReview: this.deleteReview\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 21\n        }, this);\n      }\n    } else {\n      return;\n    }\n  } // Placeholder\n\n\n  handleLoginAttempt(user, pass) {\n    if (user === \"admin\" && pass === \"admin\") {\n      this.setState({\n        userLoggedIn: user\n      });\n      this.closeOverlay();\n      return true;\n    } else if (user === \"user\" && pass === \"user\") {\n      this.setState({\n        userLoggedIn: user\n      });\n      this.closeOverlay();\n      return true;\n    }\n\n    return false;\n  }\n\n  renderOverlayPage() {\n    if (this.state.overlayClass === \"loginPage\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loginPage\",\n        children: /*#__PURE__*/_jsxDEV(LoginPage, {\n          closeHandler: this.closeOverlay,\n          handleLoginAttempt: this.handleLoginAttempt\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 15\n      }, this);\n    } else {\n      return;\n    }\n  }\n\n  closeOverlay() {\n    this.setState({\n      overlayClass: \"none\"\n    });\n  }\n\n  closeSidePage() {\n    this.setState({\n      currUserId: -1,\n      mapClass: \"fullMap\",\n      currLocId: -1,\n      currSearchQuery: -1,\n      showSearchPage: false\n    });\n  }\n\n  handleLogin() {\n    if (this.state.userLoggedIn === \"\") {\n      this.setState({\n        overlayClass: \"loginPage\"\n      });\n    } else {\n      this.setState({\n        userLoggedIn: \"\"\n      });\n    }\n  }\n\n  renderUserPageButton() {\n    if (this.state.userLoggedIn !== \"\") {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"userPageButton\",\n        className: \"purpleButton\",\n        onClick: () => {\n          this.openUserPage(this.state.userLoggedIn);\n        },\n        children: `${this.state.userLoggedIn}'s Page`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 15\n      }, this);\n    }\n\n    return;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [this.renderSidePage(), this.renderOverlayPage(), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: this.state.mapClass,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"searchButton purpleButton\",\n          onClick: this.openSearchPage,\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(SiteMap, {\n          locations: this.state.locData.getGeoLocData(),\n          openLocPage: this.openLocPage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), this.renderUserPageButton(), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"loginButtonMain\",\n          className: \"purpleButton\",\n          onClick: this.handleLogin,\n          children: this.state.userLoggedIn === \"\" ? \"Register/Login\" : \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nexport default App;","map":{"version":3,"sources":["/home/be6douze/Documents/CSC309/team28/client/src/App.js"],"names":["React","LocationData","UserData","SiteMap","LocationPage","UserPage","SearchPage","SearchForm","ReviewPage","LoginPage","defaultTags","App","Component","constructor","props","leaveReview","setState","sidePageClass","backToLocPage","state","currLocId","closeSidePage","backToSearchPage","currSearchQuery","mapClass","overlayClass","userLoggedIn","currUserId","showSearchPage","locData","userData","addLocation","updateTags","name","val","addUser","addReview","openLocPage","bind","openUserPage","openSearchPage","setSearchResult","handleLogin","closeOverlay","handleLoginAttempt","deleteReview","deleteUser","id","otherSetting","username","query","locId","uid","getUser","removeReview","removeUser","renderExitButton","process","env","PUBLIC_URL","renderSidePage","getLocationsWithQuery","locations","getLoc","user","pass","renderOverlayPage","renderUserPageButton","render","getGeoLocData"],"mappings":"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","sourcesContent":["/* New cleaned up version of App.js */\nimport React from 'react';\n\nimport './App.css';\nimport LocationData from './helperJS/LocationData';\nimport UserData from './helperJS/UserData';\nimport SiteMap from './react_components/SiteMap';\nimport LocationPage from './react_components/LocationPage';\nimport UserPage from './react_components/UserPage';\nimport SearchPage from './react_components/Search/searchPage';\nimport SearchForm from './react_components/Search/searchFormPage';\nimport ReviewPage from './react_components/ReviewPage'\nimport LoginPage from './react_components/LoginPage'\nconst defaultTags = [\"Curbside Pickup\", \"Hand Sanitizer\", \"Masks\", \"Gloves\", \"Checks Temperature\", \"Patio\"];\n\nexport class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      mapClass: \"fullMap\",\n      overlayClass: \"none\",\n      userLoggedIn: \"\",\n      currLocId: -1,\n      currUserId: -1,\n      currSearchQuery: -1,\n      showSearchPage: false,\n      locData: new LocationData(),\n      userData: new UserData(),\n      sidePageClass:\"locPage\"\n    };\n    // Adds hardcoded location data\n    this.state.locData.addLocation(\"Sidney Smith\", \"Lecture Hall\", 43.663098, -79.398568, defaultTags);\n    this.state.locData.addLocation(\"UofT Bookstore\", \"Store\", 43.659213, -79.396960, defaultTags);\n    this.state.locData.addLocation(\"Isabel Bader Theatre\", \"Theatre\", 43.667246, -79.392524, defaultTags);\n\n    this.state.locData.updateTags(0, [{name: defaultTags[4], val: 60}, {name: defaultTags[1], val: 95}, {name: defaultTags[0], val: 20}]);\n    this.state.locData.updateTags(1, [{name: defaultTags[2], val: 42.5}, {name: defaultTags[3], val: 0.5}]);\n    this.state.locData.updateTags(2, [{name: defaultTags[5], val: 100}]);\n\n    this.state.userData.addUser(\"admin\", \"admin\")\n    this.state.userData.addUser(\"user\", \"js\")\n    this.state.userData.addUser(\"janedoe\", \"jd\")\n\n    this.state.userData.addReview(0, 1, 4.0, \"Lots of hand sanitizer on hand!\")\n    this.state.userData.addReview(0, 2, 4.5, \"Washrooms infrequently cleaned. Terrible, but I'll give a high rating for testing purposes.\")\n    this.state.locData.addReview(0, \"user\", 4.0, \"Lots of hand sanitizer on hand!\")\n    this.state.locData.addReview(0, \"janedoe\", 4.5, \"Washrooms infrequently cleaned. Terrible, but I'll give a high rating for testing purposes.\")\n\n    this.openLocPage = this.openLocPage.bind(this);\n    this.openUserPage = this.openUserPage.bind(this);\n    this.openSearchPage = this.openSearchPage.bind(this);\n    this.setSearchResult =this.setSearchResult.bind(this);\n    this.closeSidePage = this.closeSidePage.bind(this);\n    this.handleLogin = this.handleLogin.bind(this);\n    this.closeOverlay = this.closeOverlay.bind(this);\n    this.handleLoginAttempt = this.handleLoginAttempt.bind(this);\n    this.deleteReview = this.deleteReview.bind(this);\n    this.deleteUser = this.deleteUser.bind(this);\n  }\n  // Marker Handler\n  openLocPage(id) {\n    const otherSetting = (this.state.mapClass === \"fullMap\") ? \"sideMap\" : \"fullMap\";\n    if (((this.state.currLocId === -1) || (this.state.currLocId === id)) && !(this.state.showSearchPage || this.state.currUserId !== -1)) {\n      this.setState({currUserId: -1, showSearchPage: false, mapClass: otherSetting, currLocId: ((this.state.currLocId === id) ? -1 : id),\n        sidePageClass: \"locPage\"});\n    } else {\n      this.setState({currUserId: -1, showSearchPage: false, currLocId: id, sidePageClass: \"locPage\"});\n    }\n  }\n  openUserPage(username) {\n    if (this.state.sidePageClass === \"userPage\" && this.state.currUserId === username) {\n      this.closeSidePage();\n    } else {\n      this.setState({currUserId: username, sidePageClass: \"userPage\", mapClass: \"sideMap\"});\n    }\n  }\n\n  openSearchPage() {\n    if (!this.state.showSearchPage) {\n      this.setState({showSearchPage: true, currSearchQuery: -1, currLocId: -1, mapClass: \"sideMap\"});\n    }\n    else {\n      this.setState({showSearchPage: false, currSearchQuery: -1, currLocId: -1, mapClass: \"fullMap\"});\n    }\n  }\n\n  setSearchResult(query) {\n    this.setState({currSearchQuery: query});\n  }\n\n  deleteReview(username, locId, id) {\n    const uid = this.state.userData.getUser(username).uid;\n    this.setState({locData: this.state.locData.removeReview(locId, id),\n                   userData: this.state.userData.removeReview(uid, id)\n    });\n  }\n\n  deleteUser(username) {\n    this.closeSidePage();\n    this.setState({userData: this.state.userData.removeUser(username, this.state.locData)});\n  }\n\n  renderExitButton() {\n    return <img className=\"exitButton\" alt='exitButton' src={`${process.env.PUBLIC_URL}/assets/images/exit.png`} title={'Close Side Panel'} onClick={this.closeSidePage}/>;\n  }\n\n  // We might want to use routers instead; this works for now.\n  renderSidePage() {\n    if (this.state.mapClass === \"sideMap\") {\n        if (this.state.showSearchPage) {\n          if (this.state.currSearchQuery === -1) {\n            return (<div className=\"sidePage\">\n              {this.renderExitButton()}\n              <SearchForm setSearchResult={this.setSearchResult}/>\n            </div>);\n          } else {\n            return (<div className=\"sidePage\">\n              {this.renderExitButton()}\n              <SearchPage locData={this.state.locData.getLocationsWithQuery(this.state.currSearchQuery)} userData={this.state.userData.getUser(this.state.currUserId)} \n              openLocPage={this.openLocPage} backToSearchPage={this.backToSearchPage} />\n            </div>);\n          }  \n        }\n        if (this.state.currUserId !== -1 && this.state.sidePageClass === 'userPage') {\n            return (<div className=\"sidePage\">\n              {this.renderExitButton()}\n              <UserPage locData={this.state.locData.locations} deleteReview={this.deleteReview} userData={this.state.userData.getUser(this.state.currUserId)}\n              currentUser={this.state.userLoggedIn} deleteUser={this.deleteUser} openLocPage={this.openLocPage} backToLocPage={this.backToLocPage}/>\n            </div>);\n        }\n        if(this.state.sidePageClass === \"leaveReviewPage\"){\n            return (<div className=\"sidePage\">\n            {this.renderExitButton()}\n            <ReviewPage locData={this.state.locData.getLoc(this.state.currLocId)} backToLocPage={this.backToLocPage} currentUser={this.state.userLoggedIn}/>\n          </div>);\n        } else{\n            return (<div className=\"sidePage\">\n              {this.renderExitButton()}\n              <LocationPage locData={this.state.locData.getLoc(this.state.currLocId)} openUserPage={this.openUserPage} \n              leaveReview={this.leaveReview} currentUser={this.state.userLoggedIn} deleteReview={this.deleteReview}/>\n            </div>);\n        }\n\n    } else {\n\n      return;\n    }\n  }\n\n  // Placeholder\n  handleLoginAttempt(user, pass) {\n    if (user === \"admin\" && pass === \"admin\") {\n      this.setState({userLoggedIn: user});\n      this.closeOverlay()\n      return true;\n    }\n    else if (user === \"user\" && pass === \"user\") {\n      this.setState({userLoggedIn: user});\n      this.closeOverlay();\n      return true;\n    }\n    return false;\n  }\n  \n\n  renderOverlayPage() {\n    if (this.state.overlayClass === \"loginPage\") {\n      return (<div className=\"loginPage\">\n              <LoginPage closeHandler={this.closeOverlay} handleLoginAttempt={this.handleLoginAttempt}/>\n            </div>);\n    } else {\n      return ;\n    }\n  }\n\n  closeOverlay() {\n    this.setState({overlayClass: \"none\"})\n  }\n\n  leaveReview = () => {\n    this.setState({sidePageClass: \"leaveReviewPage\"});\n\n  }\n  backToLocPage = () => {\n    if (this.state.currLocId !== -1) {\n      this.setState({sidePageClass: \"locPage\"});\n    } else {\n      this.closeSidePage();\n    }\n  }\n\n  backToSearchPage = () => {\n    this.setState({currSearchQuery: -1});\n  }\n\n  closeSidePage() {\n    this.setState({currUserId: -1, mapClass: \"fullMap\", currLocId: -1, currSearchQuery: -1, showSearchPage: false});\n  }\n\n  handleLogin() {\n    if (this.state.userLoggedIn === \"\") {\n      this.setState({overlayClass: \"loginPage\"})\n    } else {\n      this.setState({userLoggedIn: \"\"})\n    }\n  }\n\n  renderUserPageButton() {\n    if (this.state.userLoggedIn !== \"\") {\n      return (<div id=\"userPageButton\" className=\"purpleButton\" onClick={() => {this.openUserPage(this.state.userLoggedIn)}}>\n        {`${this.state.userLoggedIn}'s Page`}\n      </div>);\n    }\n    return;\n  }\n\n  render() {\n    return (\n      <div>\n          {this.renderSidePage()}\n          {this.renderOverlayPage()}\n          <div className={this.state.mapClass}>\n          <button className = \"searchButton purpleButton\" onClick={this.openSearchPage}>Search</button>\n          <SiteMap locations={this.state.locData.getGeoLocData()} openLocPage={this.openLocPage}/>\n          {this.renderUserPageButton()}\n          <div id=\"loginButtonMain\" className=\"purpleButton\" onClick={this.handleLogin}>{(this.state.userLoggedIn === \"\") ? \"Register/Login\" : \"Logout\"}</div>\n          </div>\n      </div>\n\n    );\n  }\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}